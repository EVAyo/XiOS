



1.打开App时: 发送`UDID`和`BundleID`给`APNs`加密后返回`deviceToken`

2.获取`Token`后，App调用接口,将用户身份信息和`deviceToken`发给服务器，服务器记录

3.当推送消息时, 服务器按照用户身份信息找到存储的`deviceToken`，将消息和`deviToken`发送给`APNs`

4.苹果的APNs通过`deviceToken`, 找到指定设备的指定程序, 并将消息推送给用户







- iOS 7 出现的Silent remote notifications(远程静默推送)
- iOS 8 出现的Category(分类, 也可称之为快捷回复)
- iOS 9 出现的Text Input action(文本框快捷回复).

随着iOS10的到来 , 苹果对远程通知和本地通知进行了大范围的更新.
iOS10推出了全新的**UserNotifications**框架(iOS10之前从属于UIKit框架).







# 推送消息扩展

https://www.jianshu.com/p/8c362a6dcc0e

- UNNotificationServiceExtension
- UNNotificationContentExtension







“mutable-content”: 1，代表自定义了推送 例如图片、视频、声音等
“content-available”:1，静默推送
